@{
    ViewBag.Title = "Home Page";


    int counter1 = 0, counter2 = 0, counter3 = 0;
}
@functions{
    private void beWorker()
    {
        Model.Role = "Worker";

    }
    private void beManager()
    {
        Model.Role = "Manager";
    }
    private void beAdmin()
    {
        Model.Role = "Admin";
    }
}
<button type="button" class="btn btn-primary" onclick="beWorker">Worker</button>
<button type="button" class="btn btn-primary" onclick="beManager">Manager</button>
<button type="button" class="btn btn-primary" onclick="beAdmin">Admin</button>

<h1>Hello, @Model.Role @Model.Username !</h1>



@if (Model.Role == "Worker")
{
    <table align="center" class="table table-striped table-hover">
        <thead>
            <tr><th>ACTIVE ASSIGNMENTS</th></tr>
            <tr>
                <th>Name</th>

                <th>Deadline</th>

            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Assignments)
            {
                if (item.Status == "ACTIVE")
                {
                    counter1++;
                    <tr>
                        <td>
                            @item.Name<details>
                                <summary>Details</summary>
                                <p>Creation date: @item.CreationDate.Date.ToString("dd/MM/yy")</p>
                                <p>Description: @item.Description</p>
                                <p>Status: @item.Status</p>
                            </details>
                        </td>
                        <td>Deadline: @item.Deadline.Date.ToString("dd/MM/yyyy")</td>


                    </tr>

                }
            }
            @if (counter1 == 0)
            {
                <tr><td>No active assignments</td><td></td></tr>
            }

        </tbody>
    </table>


    <table align="center" class="table table-striped table-hover">
        <thead>
            <tr><th>INACTIVE ASSIGNMENTS</th></tr>
            <tr>
                <th>Name</th>
                <th>Deadline</th>

            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Assignments)
            {
                if (item.Status == "INACTIVE")
                {
                    counter2++;
                    <tr>
                        <td>
                            @item.Name<details>
                            <summary>Details</summary>
                            <p>Creation date: @item.CreationDate.Date.ToString("dd/MM/yy")</p>
                            <p>Description: @item.Description</p>
                            <p>Status: @item.Status</p>
                        </details>
                    </td>
                    <td>Deadline: @item.Deadline.Date.ToString("dd/MM/yyyy")</td>


                </tr>

                }
            }
            @if (counter2 == 0)
            {
                <tr><td>No inactive assignments</td><td></td></tr>
            }

        </tbody>
    </table>

    <table align="center" class="table table-striped table-hover">
        <thead>
            <tr><th>COMPLETED ASSIGNMENTS</th></tr>
            <tr>
                <th>Name</th>
                <th>Deadline</th>

            </tr>
        </thead>
        <tbody>



            @foreach (var item in Model.Assignments)
            {

                if (item.Status == "COMPLETED")
                {
                    counter3++;
                    <tr>
                        <td>
                            @item.Name<details>
                                <summary>Details</summary>
                                <p>Creation date: @item.CreationDate.Date.ToString("dd/MM/yy")</p>
                                <p>Description: @item.Description</p>
                                <p>Status: @item.Status</p>
                            </details>
                        </td>
                        <td>Deadline: @item.Deadline.Date.ToString("dd/MM/yyyy")</td>

                    </tr>}


            }
            @if (counter3 == 0)
            {
                <tr><td>No completed assignments</td><td></td></tr>
            }

        </tbody>
    </table>
    <table align="center" class="table table-striped table-hover">
        <thead>
            <tr><th>YOUR GROUPS</th></tr>
            <tr>
                <th>Name</th>
                <th>No. of Workers</th>
                <th>Leader</th>

            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Groups)
            {
                <tr>
                    <th><a href="">@item.Name</a></th>
                    <th> @item.Workers.Count</th>
                    <th> @item.Leader.Username</th>

                </tr>
            }
        </tbody>
    </table>
}

else if (Model.Role == "Manager")
{
    <table align="center" class="table  table-striped table-hover">
        <thead>
            <tr><th>USERS</th></tr>
            <tr>

                <th>Username</th>
                <th>Role</th>
                <th>Group</th>
                <th>No. of Assignments</th>
                <th>No. of Groups</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Groups)
            {
                foreach (var user in item.Workers)
                {
                    <tr>
                        <th>@user.Username</th>
                        <th> @user.Role</th>
                        <th> @item.Name</th>
                        <th> @user.Assignments.Count</th>
                        <th> @user.Groups.Count</th>
                    </tr>
                }
            }
        </tbody>
    </table>
    <!-- <table align="center" class="table  table-striped table-hover">
           <thead>
               <tr><th>YOUR GROUPS</th></tr>
               <tr>
                   <th>Name</th>
                   <th>No. of Workers</th>
                   <th>Leader</th>

               </tr>
           </thead>
           <tbody>
          @*     @foreach (var item in Model.Groups)
               {
                   <tr>
                       <th><a href="">@item.Name</a></th>
                       <th> @item.Workers.Count</th>
                       <th> @item.Leader.Username</th>

                   </tr>
               }*@
           </tbody>
       </table>-->
    }
    else if(Model.Role=="Admin"){
    <table align="center" class="table  table-striped table-hover">
        <thead>
            <tr><th>USERS</th></tr>
            <tr>

                <th>Username</th>
                <th>Role</th>
                <th>Group</th>
                <th>No. of Assignments</th>
                <th>No. of Groups</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Groups)
            {
                foreach (var user in item.Workers)
                {
                    <tr>
                        <th>@user.Username</th>
                        <th> @user.Role</th>
                        <th> @item.Name</th>
                        <th> @user.Assignments.Count</th>
                        <th> @user.Groups.Count</th>
                        <th><button type="button" class="btn btn-primary">Edit (TO DO)</button></th>
                    </tr>
                }
            }
        </tbody>
    </table>
    <button onclick="location.href = '/Account/Register'" type="button" class="btn btn-primary">
        CREATE NEW USER
    </button>

}
<div class="jumbotron">
    <h1>VNAST</h1>
    <p class="lead">Very Nice App for Supervising Tasks</p>
    <p><a href="" class="btn btn-primary btn-lg">Download Android App</a></p>
</div>

<!--
<div class="row">
    <div class="col-md-4">
        <h2>Getting started</h2>
        <p>
            ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
            enables a clean separation of concerns and gives you full control over markup
            for enjoyable, agile development.
        </p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301865">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Get more libraries</h2>
        <p>NuGet is a free Visual Studio extension that makes it easy to add, remove, and update libraries and tools in Visual Studio projects.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301866">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Web Hosting</h2>
        <p>You can easily find a web hosting company that offers the right mix of features and price for your applications.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301867">Learn more &raquo;</a></p>
    </div>
</div>
    -->
